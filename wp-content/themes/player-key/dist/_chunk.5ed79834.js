import{_ as V,f as n,r as l,o as m,c as u,a as o,n as w,b as a,w as b,g as k,h as d,i as F,e as f,F as v}from"./main.c6ab2dd8.js";import{H as y}from"./_chunk.43d6d570.js";import{E as N}from"./_chunk.2d418ff2.js";import{F as g}from"./_chunk.95ba0f4f.js";import{L as q}from"./_chunk.4ec6e6ce.js";const L={name:"CompleteParentView",components:{Loader:q,FormItemText:g,ErrorList:N,Heading:y},watch:{form:{handler(){this.isFormValid=this.isRequiredFieldsFiled()},deep:!0}},data(){return{isLinkActive:!0,isSubmitting:!1,isFormValid:!1,user:null,errors:[],form:{firstName:"",lastName:"",email:"",password:"",passwordRepeat:""}}},methods:{isRequiredFieldsFiled(){let r=!0;for(let e in this.form)this.form[e]===""&&(r=!1);return r},async formSubmit(){this.isSubmitting=!0,this.form.password!==this.form.passwordRepeat?(this.errors.push("Passwords must match!"),this.isSubmitting=!1):(this.errors=[],n.activationUser({parentId:this.$route.query.id,form:this.form,activation_token:this.$route.query.token}).then(r=>{r.data.success&&(this.$store.commit("activationSuccess"),this.$router.push({name:"sign-in"}))}))}},mounted(){n.checkUser(localStorage.getItem("pki-auth")).then(r=>{r.data.success?this.$router.push({name:"board"}):n.activationCheck({id:this.$route.query.id,token:this.$route.query.token}).then(e=>{e.data.success?(this.user=e.data.data,this.form.firstName=this.user.first_name,this.form.lastName=this.user.last_name,this.form.email=this.user.email):(this.isLinkActive=!1,this.errors.push(e.data.data))})})}},S={class:"wrapper wrapper--form"},x={class:"form__fieldset"},C={class:"form__actions"},R=["disabled"],U={key:0,class:"form__actions-note"},E=a("sup",null,"(*)",-1);function P(r,e,A,I,s,p){const c=l("Loader"),h=l("Heading"),_=l("ErrorList"),i=l("FormItemText");return m(),u(v,null,[o(c,{class:w({active:s.isSubmitting})},null,8,["class"]),a("div",S,[o(h,{level:1},{default:b(()=>[f("Activate you account")]),_:1}),s.errors.length?(m(),k(_,{key:0,errors:s.errors},null,8,["errors"])):d("",!0),s.isLinkActive?(m(),u("form",{key:1,onSubmit:e[5]||(e[5]=F((...t)=>p.formSubmit&&p.formSubmit(...t),["prevent"]))},[a("div",x,[o(i,{name:"first-name",label:"First Name","input-type":"text","is-required":!0,modelValue:s.form.firstName,"onUpdate:modelValue":e[0]||(e[0]=t=>s.form.firstName=t)},null,8,["modelValue"]),o(i,{name:"last-name",label:"Last Name","input-type":"text","is-required":!0,modelValue:s.form.lastName,"onUpdate:modelValue":e[1]||(e[1]=t=>s.form.lastName=t)},null,8,["modelValue"]),o(i,{name:"email",label:"Email","input-type":"email","is-required":!0,modelValue:s.form.email,"onUpdate:modelValue":e[2]||(e[2]=t=>s.form.email=t),"css-modifier":"full"},null,8,["modelValue"]),o(i,{name:"password",label:"Password","input-type":"password","is-required":!0,modelValue:s.form.password,"onUpdate:modelValue":e[3]||(e[3]=t=>s.form.password=t)},null,8,["modelValue"]),o(i,{name:"password-repeat",label:"Password Repeat","input-type":"password","is-required":!0,modelValue:s.form.passwordRepeat,"onUpdate:modelValue":e[4]||(e[4]=t=>s.form.passwordRepeat=t)},null,8,["modelValue"])]),a("div",C,[a("button",{type:"submit",class:"button button--lime",disabled:!s.isFormValid},"Submit",8,R),s.isFormValid?d("",!0):(m(),u("span",U,[f("Please fill in all required "),E,f(" fields")]))])],32)):d("",!0)])],64)}const j=V(L,[["render",P]]);export{j as default};
