import{H as R}from"./_chunk.43d6d570.js";import{F as $}from"./_chunk.95ba0f4f.js";import{f as u}from"./_chunk.c8b7f1d3.js";import{E as k}from"./_chunk.2d418ff2.js";import{M as q}from"./_chunk.322796ac.js";import{_ as I,r as c,o as r,c as n,b as i,a as g,w as b,n as w,g as h,h as p,i as L,F as y,d as v,e as d,t as f,p as M,j as P}from"./main.c6ab2dd8.js";const U={name:"RegisterRoleView",components:{MessageList:q,ErrorList:k,FormItemText:$,Heading:R},data(){const e={};return u[this.$route.params.role].forEach(o=>{o.fields.forEach(a=>{e[a.model]=""})}),e.role=this.$route.params.role,{errors:[],messages:[],form:e,formFields:u,isFormValid:!1}},watch:{form:{handler(){this.isFormValid=this.isRequiredFieldsFiled()},deep:!0}},computed:{errors(){return this.$store.state.authentication.validationErrors},isSubmitting(){return this.$store.state.authentication.isSubmitting}},mounted(){this.$store.commit("clearValidationErrors")},methods:{isRequiredFieldsFiled(){let e=!0;return u[this.$route.params.role].forEach(o=>{o.fields.forEach(a=>{a.isRequired&&this.form[a.model]===""&&(e=!1)})}),e},checkPasswords(){return this.form.password!==this.form.passwordRepeat?(this.errors.push("Passwords must match"),!1):this.form.password.length<7?(this.errors.push("Password must consist of at least 7 characters"),!1):this.form.password.length<7?(this.errors.push("Password must contain at least 7 characters"),!1):/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{7,}$/.test(this.form.password)?!0:(this.errors.push("Password must contain symbol, upper and lower case letters and a number"),!1)},async formSubmit(){this.errors=[],this.$store.commit("registerStart"),this.checkPasswords()?this.$store.dispatch("register",this.form).then(()=>{this.$route.params.role!=="admin"?this.$router.push({name:"sign-in"}):this.messages.push("You have successfully registered. After the approval of your account, you will receive a message to your email.")}):this.$store.commit("registerFailure",this.errors)}}},B=e=>(M("data-v-468b2cc1"),e=e(),P(),e),C={class:"wrapper wrapper--form"},H={class:"form-holder"},N={class:"form-holder__heading-role"},T={class:"form__fieldset"},z={class:"form__actions"},A=["disabled"],D={key:0,class:"form__actions-note"},j=B(()=>i("sup",null,"(*)",-1));function Y(e,o,a,Z,t,l){const _=c("Heading"),S=c("ErrorList"),V=c("MessageList"),E=c("FormItemText");return r(),n("div",C,[i("div",H,[g(_,{level:1,class:w("form-holder__heading")},{default:b(()=>[d(f("Sign Up as ")+" "),i("span",N,f(e.$route.params.role),1)]),_:1}),l.errors.length>0?(r(),h(S,{key:0,errors:l.errors},null,8,["errors"])):p("",!0),t.messages.length>0?(r(),h(V,{key:1,messages:t.messages,type:"success"},null,8,["messages"])):p("",!0),i("form",{class:"form",onSubmit:o[0]||(o[0]=L((...m)=>l.formSubmit&&l.formSubmit(...m),["prevent"]))},[(r(!0),n(y,null,v(t.formFields[this.$route.params.role],(m,F)=>(r(),n("div",T,[g(_,{level:3,align:"left",class:w("form__fieldset-title")},{default:b(()=>[d(f(`${F+1}. ${m.title}`),1)]),_:2},1024),(r(!0),n(y,null,v(m.fields,s=>(r(),h(E,{name:s.name,"is-required":s.isRequired,label:s.label,"input-type":s.type,"css-modifier":s.cssModifier??s.cssModifier,modelValue:t.form[s.model],"onUpdate:modelValue":x=>t.form[s.model]=x},null,8,["name","is-required","label","input-type","css-modifier","modelValue","onUpdate:modelValue"]))),256))]))),256)),i("div",z,[i("button",{type:"submit",class:"button button--lime",disabled:!t.isFormValid||l.isSubmitting},"Submit",8,A),t.isFormValid?p("",!0):(r(),n("span",D,[d("Please fill in all required "),j,d(" fields")]))])],32)])])}const X=I(U,[["render",Y],["__scopeId","data-v-468b2cc1"]]);export{X as default};
